<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechDetective - Hardware Risk Scores You Can Use</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&family=Inter:wght@400;600;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        
        /* 核心动画 */
        .verdict-stamp {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-12deg);
            border: 4px solid #ef4444; color: #ef4444; font-size: 1.5rem; font-weight: 900;
            text-transform: uppercase; padding: 0.5rem 1rem; background-color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.3); z-index: 20; white-space: nowrap; letter-spacing: 2px;
            opacity: 0; animation: stampIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards 0.3s;
        }
        @keyframes stampIn { from { opacity: 0; transform: translate(-50%, -50%) scale(2) rotate(-12deg); } to { opacity: 1; transform: translate(-50%, -50%) scale(1) rotate(-12deg); } }
        
        .risk-card { background: #1e293b; border: 1px solid #334155; transition: all 0.3s; }
        .risk-card:hover { border-color: #60a5fa; transform: translateY(-2px); box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5); }
        
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Navigation Hover Effects */
        .nav-item:hover { color: #60a5fa; }
    </style>
</head>
<body class="flex flex-col min-h-screen selection:bg-blue-500 selection:text-white">

    <nav class="bg-slate-900/90 backdrop-blur border-b border-slate-800 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0 font-black text-xl tracking-tighter cursor-pointer" onclick="window.scrollTo(0,0)">
                    <span class="text-blue-500">Tech</span>Detective
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8 text-sm font-bold text-gray-300">
                        <a href="#hero" class="nav-item cursor-pointer"><i class="fa-solid fa-magnifying-glass mr-2"></i>Search Risk</a>
                        <a href="#trending" class="nav-item cursor-pointer"><i class="fa-solid fa-chart-simple mr-2"></i>Trending Reports</a>
                        <a href="#" onclick="openEvidenceModal()" class="nav-item cursor-pointer text-blue-400 hover:text-white transition"><i class="fa-solid fa-pen-to-square mr-2"></i>Submit Evidence</a>
                        <a href="#" onclick="alert('Methodology: We aggregate Reddit, YouTube, and Forum failure reports.')" class="nav-item cursor-pointer"><i class="fa-solid fa-book mr-2"></i>How It Works</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div id="hero" class="bg-slate-900 pb-12 pt-12 px-4 relative overflow-hidden border-b border-slate-800">
        <div class="max-w-4xl mx-auto text-center z-10 relative">
            
            <h1 class="text-4xl md:text-6xl font-black mb-4 tracking-tighter text-white leading-tight">
                Tech Detective — <br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">Hardware Risk Scores You Can Use</span>
            </h1>
            <p class="text-lg text-gray-400 mb-8 font-medium">
                Understand reliability before you buy. <br>
                <span class="text-slate-500 text-sm">(risk-driven insights & community evidence)</span>
            </p>

            <div class="relative max-w-2xl mx-auto mb-8 group">
                <div class="absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none">
                    <i class="fa-solid fa-search text-gray-500 group-hover:text-blue-500 transition"></i>
                </div>
                <input type="text" id="search-input" onkeyup="filterProducts()" 
                    class="block w-full p-4 pl-12 text-lg text-white border border-slate-600 rounded-2xl bg-slate-800 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-500 transition shadow-2xl" 
                    placeholder="Search model (e.g., 'Ender 3', 'Dell XPS')...">
            </div>

            <div class="flex justify-center gap-4 fade-in">
                <button onclick="setUserProfile('Beginner')" id="btn-user-beginner" class="px-5 py-3 bg-blue-600 text-white rounded-xl border border-blue-500 font-bold transition-all shadow-lg flex flex-col items-center min-w-[140px]">
                    <div class="flex items-center"><i class="fa-solid fa-baby mr-2"></i> Beginner</div>
                    <span class="text-[10px] font-normal opacity-80 mt-1">Simple Risk Overview</span>
                </button>
                <button onclick="setUserProfile('Geek')" id="btn-user-geek" class="px-5 py-3 bg-slate-800 text-gray-400 rounded-xl border border-slate-700 hover:bg-slate-700 transition-all flex flex-col items-center min-w-[140px]">
                    <div class="flex items-center"><i class="fa-solid fa-screwdriver-wrench mr-2"></i> Geek</div>
                    <span class="text-[10px] font-normal opacity-80 mt-1">Detailed Issue Tags</span>
                </button>
            </div>
        </div>
    </div>

    <div id="arena" class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 items-start fade-in w-full p-4 md:p-8 min-h-[400px]">
        </div>

    <div id="trending" class="bg-slate-900 border-t border-slate-800 py-12 px-4">
        <div class="max-w-6xl mx-auto">
            <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                <i class="fa-solid fa-fire text-orange-500 mr-2"></i> Recent Community Investigations
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-slate-800 rounded-xl p-5 border border-slate-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-yellow-600 text-white text-xs font-bold px-2 py-1">Risk: 76/100</div>
                    <h4 class="font-bold text-white text-lg">Bambu Lab X1 Carbon</h4>
                    <p class="text-xs text-gray-400 mb-3">3D Printer • High End</p>
                    <div class="bg-slate-900 p-3 rounded mb-3">
                        <div class="text-red-400 text-xs font-bold uppercase mb-1">Top Issue</div>
                        <p class="text-sm text-gray-300">Proprietary Parts Lock-in</p>
                    </div>
                    <div class="flex items-center text-xs text-slate-500">
                        <i class="fa-brands fa-reddit mr-1"></i> Source: r/BambuLab (240+ mentions)
                    </div>
                </div>

                <div class="bg-slate-800 rounded-xl p-5 border border-slate-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-red-600 text-white text-xs font-bold px-2 py-1">Risk: 88/100</div>
                    <h4 class="font-bold text-white text-lg">Creality Ender 3 V3</h4>
                    <p class="text-xs text-gray-400 mb-3">3D Printer • Budget</p>
                    <div class="bg-slate-900 p-3 rounded mb-3">
                        <div class="text-red-400 text-xs font-bold uppercase mb-1">Calibration Issue</div>
                        <p class="text-sm text-gray-300">Z-Offset Drift (Severe)</p>
                    </div>
                    <div class="flex items-center text-xs text-slate-500">
                        <i class="fa-solid fa-comments mr-1"></i> Source: Official Forum (High Vol)
                    </div>
                </div>

                <div class="bg-slate-800 rounded-xl p-5 border border-slate-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-emerald-600 text-white text-xs font-bold px-2 py-1">Risk: 20/100</div>
                    <h4 class="font-bold text-white text-lg">Prusa MK4</h4>
                    <p class="text-xs text-gray-400 mb-3">3D Printer • Workhorse</p>
                    <div class="bg-slate-900 p-3 rounded mb-3">
                        <div class="text-yellow-400 text-xs font-bold uppercase mb-1">Minor Report</div>
                        <p class="text-sm text-gray-300">Firmware Bugs (Patched)</p>
                    </div>
                    <div class="flex items-center text-xs text-slate-500">
                        <i class="fa-brands fa-youtube mr-1"></i> Source: Tech Reviewers
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="evidence-modal" class="fixed inset-0 bg-black/90 hidden flex items-center justify-center z-50 p-4 backdrop-blur-sm">
        <div class="bg-slate-900 border border-slate-700 rounded-2xl max-w-md w-full p-6 relative shadow-2xl">
            <button onclick="closeModal('evidence-modal')" class="absolute top-4 right-4 text-gray-400 hover:text-white"><i class="fa-solid fa-xmark fa-xl"></i></button>
            
            <div class="flex items-center mb-6">
                <div class="w-10 h-10 bg-blue-900/50 rounded-full flex items-center justify-center text-blue-400 mr-3">
                    <i class="fa-solid fa-file-contract"></i>
                </div>
                <div>
                    <h2 class="text-xl font-black text-white">Submit Evidence</h2>
                    <p class="text-xs text-gray-400">Help the community avoid bad tech.</p>
                </div>
            </div>

            <form onsubmit="handleEvidenceSubmit(event)" class="space-y-4">
                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase mb-1">Device Model <span class="text-red-500">*</span></label>
                    <input type="text" required placeholder="e.g. Dell XPS 15 9500" class="w-full bg-slate-800 border border-slate-600 rounded p-3 text-white text-sm focus:border-blue-500 outline-none">
                </div>

                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase mb-1">Issue Type</label>
                    <select class="w-full bg-slate-800 border border-slate-600 rounded p-3 text-white text-sm outline-none">
                        <option>Total Failure (Brick)</option>
                        <option>Safety Hazard (Fire/Heat)</option>
                        <option>Quality Defect (Cracks/Noise)</option>
                        <option>Bad Design (Features)</option>
                    </select>
                </div>

                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase mb-1">Description <span class="text-red-500">*</span></label>
                    <textarea required rows="3" placeholder="Describe the failure..." class="w-full bg-slate-800 border border-slate-600 rounded p-3 text-white text-sm focus:border-blue-500 outline-none"></textarea>
                </div>

                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase mb-1">Source Link (Optional)</label>
                    <input type="url" placeholder="https://reddit.com/..." class="w-full bg-slate-800 border border-slate-600 rounded p-3 text-white text-sm outline-none">
                </div>

                <div class="border-t border-slate-700 pt-4">
                    <p class="text-[10px] text-gray-500 mb-2">Please submit real issues experienced (forum threads, reviews, etc.).</p>
                    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg transition-all">Submit Report</button>
                </div>
            </form>
        </div>
    </div>

    <div id="antidote-modal" class="fixed inset-0 bg-black/90 hidden flex items-center justify-center z-50 p-4 backdrop-blur-sm">
        <div class="bg-slate-900 border border-slate-700 rounded-2xl max-w-lg w-full p-6 text-center relative shadow-2xl">
            <button onclick="closeModal('antidote-modal')" class="absolute top-4 right-4 text-gray-400 hover:text-white"><i class="fa-solid fa-xmark fa-xl"></i></button>
            <div class="w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500 text-2xl">
                <i class="fa-solid fa-kit-medical"></i>
            </div>
            <h2 class="text-2xl font-black text-white mb-2">SURVIVAL KIT</h2>
            <p class="text-gray-400 mb-6 text-sm">Forensic analysis confirms you will need these parts to fix the known design flaws:</p>
            <div id="antidote-list" class="space-y-3 text-left"></div>
        </div>
    </div>

    <script>
        // =========================================================================
        //  DATABASE v26.0
        // =========================================================================
        
        let currentUserProfile = 'Beginner';

        function parseScore(score) {
            if (typeof score === 'number') return score;
            return parseInt(score.toString().replace(/[^0-9]/g, '')) || 0;
        }

        const database = [
            // --- LAPTOPS ---
            { 
                category: "Laptop", id: "dell-xps-13-plus", name: "Dell XPS 13 Plus (9320)", price: "$1,399", riskScore: 92, verdict: "DONGLE HELL", 
                persona: "Music Producers: No headphone jack means living in a dongle nightmare.", timebomb: "Month 6: Capacitive touch row freezes.", 
                db1: "Dongle Hell", p1: "No 3.5mm jack. Cannot charge & listen.", db2: "Battery Anxiety", p2: "Lasts barely 5 hours.", 
                solver: "MacBook Air M2", sReason: "15+ hours battery. Real keys.", value: "Dell XPS 13 (9315)", vReason: "Has real function keys.", 
                a1: "USB-C to Audio Adapter", l_a1: "https://amzn.to/4kD8XgK", 
                a2: "Anker Prime 200W", l_a2: "https://amzn.to/4kyVXsv", 
                l_solver: "https://amzn.to/4ax1iM6", l_value: "https://amzn.to/4aLNfUh" 
            },
            { category: "Laptop", id: "lenovo-legion-5", name: "Lenovo Legion 5 (Gen 8)", price: "$1,199", riskScore: 79, verdict: "WIFI LOTTERY", persona: "Competitive Gamers: Ping spikes lose matches.", timebomb: "Month 12: Power brick cable frays.", db1: "WiFi Card Lottery", p1: "Realtek cards cause lag spikes.", db2: "The 300W Brick", p2: "Massive and heavy charger.", solver: "ASUS ROG Zephyrus G14", sReason: "Lighter, premium Intel WiFi.", value: "Lenovo Legion 5 (Gen 7 Used)", vReason: "Cheaper, upgrade WiFi yourself.", a1: "Intel AX210 WiFi 6E Card", l_a1: "https://amzn.to/4kuLdLw", a2: "Slim Charger", l_a2: "https://amzn.to/4qtEyCJ", l_solver: "https://amzn.to/463YrsV", l_value: "https://amzn.to/3OpuxsR" },
            { category: "Laptop", id: "razer-blade-15", name: "Razer Blade 15 (2024)", price: "$2,499", riskScore: 95, verdict: "SPICY PILLOW", persona: "Students: Battery bloat is dangerous.", timebomb: "Month 18: Battery swells, bending chassis.", db1: "Spicy Pillow Risk", p1: "Heat cooks the battery.", db2: "Surface Lava", p2: "Keyboard hits 55°C.", solver: "ASUS ROG Zephyrus G16", sReason: "Runs 10°C cooler.", value: "Razer Blade 14 (AMD)", vReason: "AMD runs cooler.", a1: "IETS GT600 Cooler", l_a1: "https://amzn.to/46IyRJZ", a2: "Razer Mini Keyboard", l_a2: "https://amzn.to/4aszZTn", l_solver: "https://amzn.to/4aoclHy", l_value: "https://amzn.to/3OCX12o" },
            { category: "Laptop", id: "hp-spectre-x360", name: "HP Spectre x360", price: "$1,599", riskScore: 65, verdict: "HINGE SNAP", persona: "Artists: Flipping stresses cables.", timebomb: "Month 14: Hinge loosens.", db1: "Hinge Anxiety", p1: "Convertible hinges are fragile.", db2: "Bloatware City", p2: "15+ pre-installed junk apps.", solver: "Dell XPS 13 Plus", sReason: "Solid non-convertible hinge.", value: "Lenovo Yoga 9i", vReason: "Better soundbar hinge.", a1: "HP Care Pack", l_a1: "https://amzn.to/4aN0WCk", a2: "Clean SSD", l_a2: "https://amzn.to/3Obi3oO", l_solver: "https://amzn.to/4kRtsXf", l_value: "https://amzn.to/3M6LAPV" },
            { category: "Laptop", id: "asus-tuf-a15", name: "ASUS TUF A15", price: "$999", riskScore: 72, verdict: "JET ENGINE", persona: "Library Users: 55dB fans.", timebomb: "Month 9: Fan bearings grind.", db1: "Jet Engine Fans", p1: "Loud, cheap fans.", db2: "Ghost Screen", p2: "Slow response time causes blur.", solver: "Lenovo Legion 5", sReason: "Better screen, quieter.", value: "Acer Nitro V 15", vReason: "Reliable budget king.", a1: "Razer Headset", l_a1: "https://amzn.to/4ttHnGR", a2: "Gaming Monitor", l_a2: "https://amzn.to/4rxSxZP", l_solver: "https://amzn.to/46wZnWM", l_value: "https://amzn.to/4rP6vGj" },
            { category: "Laptop", id: "lenovo-loq", name: "Lenovo LOQ 15 (Intel)", price: "$899", riskScore: 88, verdict: "MB SUICIDE", persona: "Budget Gamers: Motherboard risk.", timebomb: "Month 4: VRM failure.", db1: "Motherboard Suicide", p1: "Specific Intel CPUs fry VRMs.", db2: "Thermonuclear Heat", p2: "Single fan can't handle it.", solver: "Acer Nitro 16", sReason: "Superior dual-fan cooling.", value: "ASUS TUF F15", vReason: "Military-grade durability.", a1: "Laptop Stand", l_a1: "https://amzn.to/3OaX19O", a2: "Cooling Pad", l_a2: "https://amzn.to/4kv8sFf", l_solver: "https://amzn.to/4bS0yDI", l_value: "https://amzn.to/4qymUhm" },
            { category: "Laptop", id: "surface-laptop-5", name: "Surface Laptop 5", price: "$1,299", riskScore: 68, verdict: "GLUE TRAP", persona: "DIY Fixers: Zero repairability.", timebomb: "Month 8: Alcantara stains yellow.", db1: "The Glue Trap", p1: "Battery glued down.", db2: "Alcantara Stain", p2: "Fabric absorbs sweat.", solver: "Dell XPS 13", sReason: "Aluminum is clean.", value: "Framework Laptop", vReason: "Completely repairable.", a1: "Sleeve", l_a1: "https://amzn.to/3Zu16Zb", a2: "External Keyboard", l_a2: "https://amzn.to/4qDObPt", l_solver: "https://amzn.to/4qx0a16", l_value: "https://amzn.to/3MBbFXr" },
            { category: "Laptop", id: "acer-swift-go-14", name: "Acer Swift Go 14", price: "$799", riskScore: 60, verdict: "WIFI DROP", persona: "Remote Workers: Drops calls.", timebomb: "Month 6: Trackpad wears down.", db1: "WiFi Dropouts", p1: "MediaTek cards struggle.", db2: "Plastic Trackpad", p2: "Feels sticky and cheap.", solver: "MacBook Air M1", sReason: "Perfect glass trackpad.", value: "Asus Zenbook 14", vReason: "OLED screen, better build.", a1: "USB WiFi", l_a1: "https://amzn.to/462RKXU", a2: "Wireless Mouse", l_a2: "https://amzn.to/4raPoP7", l_solver: "https://amzn.to/4rejrp5", l_value: "https://amzn.to/4kAUrGn" },
            { category: "Laptop", id: "samsung-galaxy-book3", name: "Samsung Galaxy Book 3", price: "$1,099", riskScore: 75, verdict: "CRACK GATE", persona: "Travelers: Screen breaks easily.", timebomb: "Month 3: Spontaneous cracks.", db1: "Crack-Gate Screen", p1: "Glass is too thin.", db2: "The Wobble", p2: "Weak hinge.", solver: "MacBook Air 15", sReason: "Solid unibody aluminum.", value: "LG Gram 16", vReason: "Flexible magnesium alloy.", a1: "Hard Case", l_a1: "https://amzn.to/46ORImL", a2: "Bluetooth Keyboard", l_a2: "https://amzn.to/3MrfHkY", l_solver: "https://amzn.to/4cq58t4", l_value: "https://amzn.to/466tbt7" },
            { category: "Laptop", id: "macbook-pro-13-m2", name: "MacBook Pro 13 (M2)", price: "$1,299", riskScore: 90, verdict: "ZOMBIE TECH", persona: "Editors: Touch Bar is dead.", timebomb: "Year 2: Webcam looks ancient.", db1: "Zombie Touch Bar", p1: "No future OS support.", db2: "60Hz Screen", p2: "Choppy scrolling.", solver: "MacBook Pro 14", sReason: "Real Pro screen (120Hz).", value: "MacBook Air M2", vReason: "Cheaper, better webcam.", a1: "4K Webcam", l_a1: "https://amzn.to/4adenvg", a2: "144Hz Monitor", l_a2: "https://amzn.to/3OCuytw", l_solver: "https://amzn.to/3ZyvtO1", l_value: "https://amzn.to/3MsXTG7" },

            // --- 3D PRINTERS ---
            {
                category: "3D_Printer", id: "ender-3-v3-se", name: "Creality Ender 3 V3 SE", price: "$199", riskScore: 85, verdict: "QC LOTTERY",
                persona: "Parents: NOT A TOY. Requires constant mechanical maintenance and debugging.", timebomb: "Month 3: The extruder gears wear out, causing underextrusion and failed prints.",
                mechScore: 6, hotendScore: 8, firmScore: 7, easeUse: 6, repair: 9, reliable: 5,
                db1: "Gantry Wobble", p1: "Cheap construction leads to Z-axis wobble and ugly lines.",
                db2: "The Spaghetti Monster", p2: "With no AI detection, a failed print will continue for 10 hours, creating a massive ball of plastic spaghetti and wasting $20 of filament.",
                a1: "CR Touch Auto Leveling Kit", l_a1: "https://amzn.to/4avRTV1", a2: "Sunlu Filament Dryer S1", l_a2: "https://amzn.to/4rieR9m",
                solver: "Flashforge Adventurer 5M", sReason: "CoreXY structure, auto-leveling, and 600mm/s speed. The reliable workhorse.", l_solver: "https://amzn.to/4rO30zE",
                value: "Sovol SV06", vReason: "Linear rails are more durable than plastic wheels for the same price.", l_value: "https://amzn.to/4bV0DGS"
            },
            {
                category: "3D_Printer", id: "bambu-a1-mini", name: "Bambu Lab A1 Mini", price: "$299", riskScore: 15, verdict: "JUST WORKS",
                persona: "Tinkerers: Do not buy. It is a closed system. You cannot modify or upgrade it.", timebomb: "Year 2: Proprietary parts may become expensive if Bambu raises prices.",
                mechScore: 1, hotendScore: 1, firmScore: 3, easeUse: 10, repair: 3, reliable: 10,
                db1: "Too Small", p1: "180mm volume limits cosplay prints.",
                db2: "Cloud Privacy Risk", p2: "Your print files go through cloud servers. If the internet goes down, you lose app control. It is a data black box.",
                a1: "Textured PEI Plate", l_a1: "https://amzn.to/4kyuwPk", a2: "eSun PLA+ Filament White", l_a2: "https://amzn.to/4ataRvx",
                solver: "Prusa Mini+", sReason: "If you care about Open Source and offline privacy, get Prusa.", l_solver: "https://amzn.to/3MIGFVp",
                value: "AnkerMake M5C", vReason: "Faster printing speeds and solid aluminum build for a similar price.", l_value: "https://amzn.to/4agB7KS"
            },
            {
                category: "3D_Printer", id: "anycubic-photon-mono", name: "Anycubic Photon Mono 2", price: "$180", riskScore: 90, verdict: "TOXIC HAZARD",
                persona: "Apartment Users: Resin fumes are toxic. You cannot use this in a bedroom or living room.", timebomb: "Month 6: The LCD screen burns out from UV light and must be replaced ($50).",
                mechScore: 9, hotendScore: 1, firmScore: 4, easeUse: 4, repair: 2, reliable: 6,
                db1: "Toxic Resin", p1: "Requires gloves, masks, and ventilation. Dangerous for pets.",
                db2: "FEP Film Tear", p2: "If the thin plastic film (FEP) tears during a print, liquid resin leaks onto the LCD screen and cures, permanently destroying your printer.",
                a1: "Anycubic Wash & Cure Station", l_a1: "https://amzn.to/4tCG87Y", a2: "Anycubic Grey Resin 1kg", l_a2: "https://amzn.to/4sblM4z",
                solver: "Flashforge Adventurer 5M", sReason: "Escape the toxicity. FDM printing requires no gloves, is safe for home, and auto-levels.", l_solver: "https://amzn.to/4tCngpS",
                value: "Elegoo Mars 4", vReason: "Comes with a built-in air filter to reduce the toxic smell.", l_value: "https://amzn.to/469PUEF"
            },
            {
                category: "3D_Printer", id: "elegoo-neptune-4", name: "Elegoo Neptune 4 Pro", price: "$280", riskScore: 75, verdict: "FIRMWARE BUG",
                persona: "Beginners: The Z-offset bug may crash the nozzle into the bed, destroying it instantly.", timebomb: "Month 4: POM wheels wear out quickly at high speeds, causing wobbly print lines.",
                mechScore: 4, hotendScore: 5, firmScore: 8, easeUse: 5, repair: 8, reliable: 6,
                db1: "Z-Offset Bug", p1: "Printer forgets height settings, scratching the bed.",
                db2: "Jet Engine Noise", p2: "The massive auxiliary cooling fan hits 65dB+. It sounds like a vacuum cleaner running next to your ear. Unusable in a bedroom.",
                a1: "PEI Magnetic Build Plate", l_a1: "https://amzn.to/4ctaUtW", a2: "Noctua Silent Fan Mod", l_a2: "https://amzn.to/4rgiixg",
                solver: "Creality K1C", sReason: "Stable firmware that doesn't crash the nozzle into the bed. Quiet mode included.", l_solver: "https://amzn.to/4rhuAFL",
                value: "Creality Ender 3 V3 KE", vReason: "Better software experience and easier to repair.", l_value: "https://amzn.to/4rhu1M9"
            },
            {
                category: "3D_Printer", id: "prusa-mini", name: "Prusa Mini+", price: "$429", riskScore: 40, verdict: "OLD TECH",
                persona: "Value Seekers: You are paying 2024 prices for 2019 speeds. It is 4x slower than modern printers.", timebomb: "Year 1: USB port wears out and Bowden tube degrades.",
                mechScore: 5, hotendScore: 4, firmScore: 2, easeUse: 8, repair: 10, reliable: 9,
                db1: "Painfully Slow", p1: "It lacks Input Shaping. A standard 'Benchy' boat takes 1.5 hours. A Bambu Lab A1 does it in 18 minutes.",
                db2: "Tiny Build Volume", p2: "180mm cube is too small for most cosplay helmets or useful organizers. You will outgrow this size in a month.",
                a1: "Raspberry Pi 4 (For OctoPrint)", l_a1: "https://amzn.to/4awdywx", a2: "Bondtech Heatbreak", l_a2: "https://amzn.to/4qG8n3c",
                solver: "Flashforge Adventurer 5M", sReason: "CoreXY structure, auto-leveling, and 600mm/s speed. The reliable workhorse.", l_solver: "https://amzn.to/3MEIa77",
                value: "Sovol SV07", vReason: "Faster Klipper speed and larger build volume for a lower price.", l_value: "https://amzn.to/3OcjO5b"
            },
            {
                category: "3D_Printer", id: "creality-k1", name: "Creality K1 (Gen 1)", price: "$399", riskScore: 82, verdict: "EXTRUDER JAM",
                persona: "Speed Demons: The Gen 1 extruder cannot handle the speed. It jams constantly.", timebomb: "Month 3: PTFE tube melts inside hotend causing permanent clogs.",
                mechScore: 5, hotendScore: 9, firmScore: 6, easeUse: 7, repair: 4, reliable: 5,
                db1: "Underextrusion Lottery", p1: "Due to a design flaw in the extruder gears, the filament slips. Your 10-hour print will fail at hour 9.",
                db2: "VFA (Vertical Artifacts)", p2: "The printer vibrates so much it leaves vertical ripple patterns on the walls. Prints look ugly.",
                a1: "Official Extruder Upgrade Kit (V3)", l_a1: "https://amzn.to/4kyx6F0", a2: "Hyper PLA High Speed Filament", l_a2: "https://amzn.to/3ZCCYU7",
                solver: "Flashforge 5M Pro", sReason: "A truly reliable enclosed CoreXY printer. Its quick-swap nozzle system solves the K1's constant jamming issues.", l_solver: "https://amzn.to/3Of1sjT",
                value: "QIDI Tech Q1 Pro", vReason: "Features an active heated chamber (60°C) for warp-free ABS printing. Far superior build quality compared to K1.", l_value: "https://amzn.to/3ZF3Oen"
            }
        ];

        // --- CORE FUNCTIONS ---
        
        // 1. Initial Load: Populate Arena with ALL items
        function initArena() {
            const arena = document.getElementById('arena');
            arena.innerHTML = '';
            database.forEach(item => {
                if(item.category === 'Laptop') renderLaptop(item, arena);
                else renderPrinter(item, arena);
            });
        }

        // 2. Search Filter (Replaces Dropdown)
        function filterProducts() {
            const query = document.getElementById('search-input').value.toLowerCase();
            const arena = document.getElementById('arena');
            arena.innerHTML = '';
            
            const filtered = database.filter(item => 
                item.name.toLowerCase().includes(query) || 
                item.id.toLowerCase().includes(query)
            );

            if(filtered.length === 0) {
                arena.innerHTML = `<div class="text-center text-gray-500 w-full col-span-3 py-10">No suspect found with that name.</div>`;
                return;
            }

            filtered.forEach(item => {
                if(item.category === 'Laptop') renderLaptop(item, arena);
                else renderPrinter(item, arena);
            });
        }

        function setUserProfile(profile) {
            currentUserProfile = profile;
            const btnBeginner = document.getElementById('btn-user-beginner');
            const btnGeek = document.getElementById('btn-user-geek');
            
            if (profile === 'Beginner') {
                btnBeginner.className = 'px-5 py-3 bg-blue-600 text-white rounded-xl border border-blue-500 font-bold transition-all shadow-lg flex flex-col items-center min-w-[140px] scale-105';
                btnGeek.className = 'px-5 py-3 bg-slate-800 text-gray-400 rounded-xl border border-slate-700 hover:bg-slate-700 transition-all flex flex-col items-center min-w-[140px] opacity-60';
            } else {
                btnBeginner.className = 'px-5 py-3 bg-slate-800 text-gray-400 rounded-xl border border-slate-700 hover:bg-slate-700 transition-all flex flex-col items-center min-w-[140px] opacity-60';
                btnGeek.className = 'px-5 py-3 bg-blue-600 text-white rounded-xl border border-blue-500 font-bold transition-all shadow-lg flex flex-col items-center min-w-[140px] scale-105';
            }
            // Re-render based on current filter state
            filterProducts(); 
        }

        // --- RENDERERS ---
        function renderLaptop(data, container) {
            const riskNum = parseScore(data.riskScore);
            const riskColor = riskNum > 70 ? 'bg-red-600' : 'bg-yellow-500';
            const html = `
                <div class="risk-card rounded-2xl overflow-hidden relative shadow-2xl fade-in flex flex-col h-full">
                    <div class="bg-slate-900 p-6 border-b border-slate-700 relative">
                        <div class="verdict-stamp">${data.verdict}</div>
                        <div class="flex justify-between items-start mb-4"><span class="bg-blue-900 text-blue-200 px-2 py-1 rounded text-xs mono">LAPTOP</span><span class="text-slate-500 text-xs mono">${data.price}</span></div>
                        <h2 class="text-2xl font-black text-white leading-none mb-1">${data.name}</h2>
                        <div class="mt-6"><div class="flex justify-between text-xs font-bold text-slate-400 mb-1"><span>FAILURE RISK</span><span class="${riskNum > 70 ? 'text-red-500' : 'text-yellow-500'}">${riskNum}% CRITICAL</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="${riskColor} h-2 rounded-full" style="width: ${riskNum}%"></div></div></div>
                    </div>
                    <div class="p-6 space-y-6 flex-grow">
                        <div class="bg-red-900/20 border border-red-900/50 p-3 rounded-lg"><h4 class="text-red-500 text-xs font-bold uppercase"><i class="fa-solid fa-user-slash mr-2"></i>DO NOT BUY IF YOU ARE:</h4><p class="text-sm text-red-200 mt-1">${data.persona}</p></div>
                        <div class="space-y-4">
                            <div><h3 class="text-red-500 font-bold text-xs uppercase">Deal Breaker 1</h3><p class="text-white font-bold">${data.db1}</p><p class="text-slate-400 text-sm">"${data.p1}"</p></div>
                            <div><h3 class="text-red-500 font-bold text-xs uppercase">Deal Breaker 2</h3><p class="text-white font-bold">${data.db2}</p><p class="text-slate-400 text-sm">"${data.p2}"</p></div>
                        </div>
                        <div class="bg-yellow-900/20 border border-yellow-700 p-3 rounded-lg relative overflow-hidden"><div class="absolute top-0 left-0 w-full h-1 hazard-stripe"></div><p class="text-xs text-yellow-200 mono mt-2"><i class="fa-solid fa-bomb mr-2"></i>${data.timebomb}</p></div>
                        
                        <div class="pt-4 border-t border-slate-700">
                             <a href="${data.l_solver}" target="_blank" class="block w-full py-3 mb-2 bg-emerald-600 hover:opacity-90 text-white font-bold text-center rounded-lg uppercase text-xs tracking-wider shadow-lg transition-all">
                                <i class="fa-solid fa-check mr-2"></i> Get Reliable Alternative
                             </a>
                             <button onclick="showAntidote('${data.id}')" class="block w-full py-3 bg-slate-700 hover:bg-slate-600 text-white font-bold text-center rounded-lg uppercase text-xs tracking-wider shadow-lg transition-all">
                                <i class="fa-solid fa-tools mr-2"></i> I'll Fix It Myself
                             </button>
                        </div>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
        }

        function renderPrinter(data, container) {
            let alertBox = "";
            let statsBlock = "";
            
            // LOGIC: Beginner vs Geek View
            if (currentUserProfile === 'Beginner') {
                // Beginner View: Simplified
                if (data.easeUse < 7) { 
                    alertBox = `<div class="bg-red-900/40 border-l-4 border-red-500 p-4 mb-4 rounded-r mt-4"><div class="flex items-center"><i class="fa-solid fa-triangle-exclamation text-red-500 mr-2"></i><span class="font-bold text-red-100">NIGHTMARE FOR BEGINNERS</span></div><p class="text-red-200 text-xs mt-1">Requires constant mechanical debugging. You will fix it more than you print.</p></div>`;
                } else {
                    alertBox = `<div class="bg-emerald-900/40 border-l-4 border-emerald-500 p-4 mb-4 rounded-r mt-4"><div class="flex items-center"><i class="fa-solid fa-check-circle text-emerald-500 mr-2"></i><span class="font-bold text-emerald-100">BEGINNER FRIENDLY</span></div><p class="text-emerald-200 text-xs mt-1">Plug and play. Excellent auto-leveling.</p></div>`;
                }
                statsBlock = `<div class="text-center text-xs text-slate-500 mt-4 italic">Detailed specs hidden for simplicity</div>`;
            } else {
                // Geek View: Detailed
                if (data.repair > 7) { 
                    alertBox = `<div class="bg-emerald-900/40 border-l-4 border-emerald-500 p-4 mb-4 rounded-r mt-4"><div class="flex items-center"><i class="fa-solid fa-screwdriver-wrench text-emerald-500 mr-2"></i><span class="font-bold text-emerald-100">EXCELLENT MOD BASE</span></div><p class="text-emerald-200 text-xs mt-1">Open source, standard parts. Perfect for Klipper upgrades.</p></div>`;
                } else { 
                    alertBox = `<div class="bg-yellow-900/40 border-l-4 border-yellow-500 p-4 mb-4 rounded-r mt-4"><div class="flex items-center"><i class="fa-solid fa-lock text-yellow-500 mr-2"></i><span class="font-bold text-yellow-100">PROPRIETARY SYSTEM</span></div><p class="text-yellow-200 text-xs mt-1">Closed source firmware. Hard to modify.</p></div>`;
                }
                statsBlock = `
                <div class="grid grid-cols-3 gap-2 mt-6">
                    <div class="bg-slate-800 p-2 rounded text-center"><div class="text-[10px] text-slate-400 uppercase">Mech</div><div class="font-bold ${data.mechScore > 5 ? 'text-red-400' : 'text-green-400'}">${data.mechScore}/10</div></div>
                    <div class="bg-slate-800 p-2 rounded text-center"><div class="text-[10px] text-slate-400 uppercase">Hotend</div><div class="font-bold ${data.hotendScore > 5 ? 'text-red-400' : 'text-green-400'}">${data.hotendScore}/10</div></div>
                    <div class="bg-slate-800 p-2 rounded text-center"><div class="text-[10px] text-slate-400 uppercase">Firmware</div><div class="font-bold ${data.firmScore > 5 ? 'text-red-400' : 'text-green-400'}">${data.firmScore}/10</div></div>
                </div>`;
            }

            const html = `
                <div class="risk-card rounded-2xl overflow-hidden relative shadow-2xl fade-in flex flex-col h-full">
                    <div class="bg-slate-900 p-6 border-b border-slate-700 relative">
                        <div class="verdict-stamp">${data.verdict}</div>
                        <div class="flex justify-between items-start mb-4"><span class="bg-purple-900 text-purple-200 px-2 py-1 rounded text-xs mono">3D PRINTER</span><span class="text-slate-500 text-xs mono">${data.price}</span></div>
                        <h2 class="text-2xl font-black text-white leading-none mb-1">${data.name}</h2>
                        ${statsBlock}
                        ${alertBox}
                    </div>
                    <div class="p-6 space-y-6 flex-grow">
                        <div class="space-y-4">
                            <div><h3 class="text-purple-400 font-bold text-xs uppercase"><i class="fa-solid fa-gears mr-1"></i> Failure Point 1</h3><p class="text-white font-bold">${data.db1}</p><p class="text-slate-400 text-sm">"${data.p1}"</p></div>
                            <div><h3 class="text-purple-400 font-bold text-xs uppercase"><i class="fa-solid fa-fire-burner mr-1"></i> Failure Point 2</h3><p class="text-white font-bold">${data.db2}</p><p class="text-slate-400 text-sm">"${data.p2}"</p></div>
                        </div>
                        <div class="bg-yellow-900/20 border border-yellow-700 p-3 rounded-lg relative overflow-hidden"><div class="absolute top-0 left-0 w-full h-1 hazard-stripe"></div><p class="text-xs text-yellow-200 mono mt-2"><i class="fa-solid fa-clock mr-2"></i>${data.timebomb}</p></div>
                        
                        <div class="pt-4 border-t border-slate-700">
                             <a href="${data.l_solver}" target="_blank" class="block w-full py-3 mb-2 bg-emerald-600 hover:opacity-90 text-white font-bold text-center rounded-lg uppercase text-xs tracking-wider shadow-lg transition-all">
                                <i class="fa-solid fa-check mr-2"></i> Get Reliable One
                             </a>
                             <button onclick="showAntidote('${data.id}')" class="block w-full py-3 bg-slate-700 hover:bg-slate-600 text-white font-bold text-center rounded-lg uppercase text-xs tracking-wider shadow-lg transition-all">
                                <i class="fa-solid fa-tools mr-2"></i> Fix This Mess
                             </button>
                        </div>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
        }

        function showAntidote(id) {
            const data = database.find(i => i.id === id);
            const list = document.getElementById('antidote-list');
            list.innerHTML = `
                <a href="${data.l_a1}" target="_blank" class="block p-4 bg-slate-800 border border-slate-600 rounded-xl hover:bg-slate-700 transition flex items-center group mb-3">
                    <div class="bg-red-900/50 p-3 rounded-lg mr-4 text-red-400"><i class="fa-solid fa-kit-medical"></i></div>
                    <div><h4 class="font-bold text-white text-sm">${data.a1}</h4><p class="text-xs text-gray-400">Essential Fix</p></div><i class="fa-solid fa-chevron-right ml-auto text-gray-600 group-hover:text-white"></i>
                </a>
                <a href="${data.l_a2}" target="_blank" class="block p-4 bg-slate-800 border border-slate-600 rounded-xl hover:bg-slate-700 transition flex items-center group">
                    <div class="bg-red-900/50 p-3 rounded-lg mr-4 text-red-400"><i class="fa-solid fa-shield-halved"></i></div>
                    <div><h4 class="font-bold text-white text-sm">${data.a2}</h4><p class="text-xs text-gray-400">Survival Gear</p></div><i class="fa-solid fa-chevron-right ml-auto text-gray-600 group-hover:text-white"></i>
                </a>`;
            document.getElementById('antidote-modal').classList.remove('hidden');
        }

        // --- MODAL HANDLERS ---
        function openEvidenceModal() { document.getElementById('evidence-modal').classList.remove('hidden'); }
        function closeModal(modalId) { document.getElementById(modalId).classList.add('hidden'); }
        
        function handleEvidenceSubmit(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "Submitting...";
            btn.disabled = true;
            
            // Simulating API call
            setTimeout(() => {
                alert("Evidence Submitted Successfully! Your report has been added to the review queue.");
                closeModal('evidence-modal');
                btn.innerText = originalText;
                btn.disabled = false;
                e.target.reset();
            }, 1500);
        }

        // --- INITIALIZE ---
        initArena(); // Load all products by default
    </script>
</body>
</html>
